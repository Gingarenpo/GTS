# 地名板

最終更新日時：2025年6月9日

追加バージョン：2.0 alpha3

## 注意

2.0 alpha3の時点では大変不安定となっており、テクスチャが正しく反映されなかったり、Minecraftがクラッシュする可能性があります。使用する場合はワールドのバックアップを強くお勧めします。

地名板は、以下のクラスで構成されています。

- `GTSBlockTrafficSign` → ブロックインスタンス
- `GTSTileEntityTrafficSign` → 地名板のTileEntity
- `GTSTileEntityRendererTrafficSign` → 地名板のレンダラー
- `GTSTrafficSignConfig` → ※ダミーの設定ファイルクラス

## パックJSON（コンフィグ）の仕様

地名板はコンフィグファイル不要です。現時点では自動生成されます。将来的にはテクスチャをもとに自由に選べるようにする予定ですが、まだ仕様がきちんと策定されていないのでどうなるか未定です。

## 自動生成される地名板について

使用方法はユーザーマニュアルに記載しているのでここでは内部仕様について記します（不安定な原因も）。

地名板は、Minecraftの起動時に「生成中」と表示されたテクスチャがダミーで作成されます。その後、`TileEntity`から内容を正しく読み込めれば正常に反映されます。

テクスチャは内部のジェネレーターで自動生成しており、国交省のレイアウトに準じています。このテクスチャ生成処理が結構重く、開発環境でも0.1秒近くかかりその間Minecraftが応答なしになります。

そのため、テクスチャ生成処理を並列処理化して、極力Minecraftを殺さないように心がけています。しかし、この代償としてわずかなタイミングでテクスチャがnullになる場合があります。なるべくエラーチェックを行うように心がけていますが、漏れがある場合ここで描画に失敗しMinecraftがクラッシュする可能性があります。次回起動時には正しいものが反映されているかロールバックされているかでワールドの破損は起こりませんが、もしこのような場合はお手数ですがご連絡いただけると助かります。

なお、2.0 alpha2までのバージョンは、こちら側のコーディングミスにより高確率で落ちます。2.0 alpha3ではこのミスは修正しているので、特に理由のない限りは最新版をご利用ください。